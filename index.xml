<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/main.xsl"?>
<b:blog xmlns="http://www.w3.org/1999/xhtml" xmlns:b="http://blog.othree.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://blog.othree.net http://blog.othree.net/blooog.xsd">
	<b:blogTitle>O3noBLOG</b:blogTitle>
	<b:blogDescription></b:blogDescription>
	<b:entries>
		<b:entriesMeta>
			<b:listType>i</b:listType>
			<b:listData listID="index"/>
		</b:entriesMeta>

		<b:entry entryID="000894" baseName="japan-self-drive">
			<b:author>
				<b:authorName>othree</b:authorName>
				<b:authorEmail>othree@gmail.com</b:authorEmail>
				<b:authorUrl></b:authorUrl>
			</b:author>
			<b:datetime>
				<b:date>2017-04-29</b:date>
				<b:time>22:58:39</b:time>
			</b:datetime>
			<b:category>diary</b:category>
			<b:title>日本自駕</b:title>
			<b:content>
				<b:summary> 這篇想要記錄一下第一次去日本自駕，就前陣子去了沖繩一趟，當然就選擇租車自駕，這篇用條列式記錄一下： 租車公司是 OTS，因為第一次的關係，所以就盡量走大眾路線 不過 OTS 因為比較大間，位置離機場也比較遠，其實比較花時間 租的車款是 Toyota C-HR，看到有特價加上早鳥，不過也還是比一般車款貴 不免俗的離開租車公司時要刷一下雨刷 大約第二天就不太有左右駕習慣問題了，回國後也沒有左右問題 沖繩比較偏遠，部分路段的路面狀況其實也不好 幾乎所有路口都可以右轉，有右轉道，可能是沖繩才這樣 晚上山路其實沒什麼路燈，交通號誌反光效果超強的，強到覺得會刺眼 不過一部份應該是因為車燈很亮，倒是號誌都很乾淨是真的 以後應該還想要東北、北海道也去試試看自駕 針對 Toyota C-HR 的部分： 後座空間真的小、後座車窗也小 四人三個行李箱有點勉強，後行李箱只能放兩個中 size 的行李箱 一大一中也不行，剩下一個大的是把後座一個位子拉倒才放進去 有個自動切換遠光燈（AHB）的功能，正確性很高，實在很方便 不過車門在開動車子後不會自動上鎖 開鎖的時候地上會有投影，有點騷包(?) 開起來感覺其實是還不錯啦...</b:summary>
				<b:mainContent><p><a class="thumbnail" href="https://www.flickr.com/photos/othree/34028951701/" title="沖繩 by othree, on Flickr"><img src="https://farm3.staticflickr.com/2805/34028951701_c6d1936940_b.jpg" width="1024" height="683" alt="沖繩" srcset="https://farm3.staticflickr.com/2805/34028951701_c6d1936940_b.jpg 1024w, https://farm3.staticflickr.com/2805/34028951701_5720ab1710_h.jpg 1600w" /></a></p>

<p>這篇想要記錄一下第一次去日本自駕，就前陣子去了沖繩一趟，當然就選擇租車自駕，這篇用條列式記錄一下：</p>

<ul>
<li>租車公司是 OTS，因為第一次的關係，所以就盡量走大眾路線</li>
<li>不過 OTS 因為比較大間，位置離機場也比較遠，其實比較花時間</li>
<li>租的車款是 Toyota C-HR，看到有特價加上早鳥，不過也還是比一般車款貴</li>
<li>不免俗的離開租車公司時要刷一下雨刷</li>
<li>大約第二天就不太有左右駕習慣問題了，回國後也沒有左右問題</li>
<li>沖繩比較偏遠，部分路段的路面狀況其實也不好</li>
<li>幾乎所有路口都可以右轉，有右轉道，可能是沖繩才這樣</li>
<li>晚上山路其實沒什麼路燈，交通號誌反光效果超強的，強到覺得會刺眼 <br />
不過一部份應該是因為車燈很亮，倒是號誌都很乾淨是真的</li>
<li>以後應該還想要東北、北海道也去試試看自駕</li>
</ul>

<p>針對 Toyota C-HR 的部分：</p>

<ul>
<li>後座空間真的小、後座車窗也小</li>
<li>四人三個行李箱有點勉強，後行李箱只能放兩個中 size 的行李箱 <br />
一大一中也不行，剩下一個大的是把後座一個位子拉倒才放進去</li>
<li>有個自動切換遠光燈（<a href="http://www.toyota-global.com/innovation/safety_technology/safety_technology/technology_file/active/ahb.html">AHB</a>）的功能，正確性很高，實在很方便</li>
<li>不過車門在開動車子後不會自動上鎖</li>
<li>開鎖的時候地上會有投影，有點騷包(?)</li>
<li>開起來感覺其實是還不錯啦</li>
</ul>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/33201465513/" title="沖繩 okinawa by othree, on Flickr"><img src="https://farm3.staticflickr.com/2946/33201465513_939151304d_b.jpg" width="1024" height="683" alt="沖繩 okinawa, " srcset="https://farm3.staticflickr.com/2946/33201465513_939151304d_b.jpg 1024w, https://farm3.staticflickr.com/2946/33201465513_ea0cd7f8c5_h.jpg 1600w" /></a></p>
</b:mainContent>
				<b:extendContent>
</b:extendContent>
			</b:content>


		</b:entry>

		<b:entry entryID="000893" baseName="first-contribution-to-nginx">
			<b:author>
				<b:authorName>othree</b:authorName>
				<b:authorEmail>othree@gmail.com</b:authorEmail>
				<b:authorUrl></b:authorUrl>
			</b:author>
			<b:datetime>
				<b:date>2017-04-26</b:date>
				<b:time>14:35:29</b:time>
			</b:datetime>
			<b:category>unix</b:category>
			<b:title>My First Contribution to Nginx</b:title>
			<b:content>
				<b:summary> 因為工作上的需要，所以其實我還蠻常會編輯 nginx configuration file 的，理所當然的編輯器是用 vim，然後就會對 nginx 設定檔的支援有意見，一般人用的 nginx 設定檔的 vim script 其實是 nginx repository 的 contrib 目錄裡面的那份，這份 vim script 其實本來也是獨立的，不過原作者好像把他捐進去 nginx 裡面，之後就一直都在裡面了，也因此之後更新就很不頻繁。 然後因為檔案都放在 nginx repository 裡面，Vim 要使用其實不太方便，所以 Github 上還看的到不少人單獨抽出來，我一開始也是 fork mosky 的來用，後來就直接在自己的 repository 上面修改了，改一陣子之後就開始想要推回 upstream，也就是 nginx 的程式庫，然後就開始了這段協工旅程(?)。 要發修改上...</b:summary>
				<b:mainContent><p><a class="thumbnail" href="https://www.flickr.com/photos/othree/25580381505/" title="nginx conf by othree, on Flickr"><img src="https://farm2.staticflickr.com/1525/25580381505_0825ef9c24_b.jpg" width="570" height="427" alt="nginx conf" srcset="https://farm2.staticflickr.com/1525/25580381505_0825ef9c24_b.jpg 1024w" /></a></p>

<p>因為工作上的需要，所以其實我還蠻常會編輯 nginx configuration file 的，理所當然的編輯器是用 vim，然後就會對 nginx 設定檔的支援有意見，一般人用的 nginx 設定檔的 vim script 其實是 nginx repository 的 contrib 目錄裡面的那份，這份 vim script 其實本來也是獨立的，不過原作者好像把他捐進去 nginx 裡面，之後就一直都在裡面了，也因此之後更新就很不頻繁。</p>

<p>然後因為檔案都放在 nginx repository 裡面，Vim 要使用其實不太方便，所以 Github 上還看的到不少人單獨抽出來，我一開始也是 fork <a href="https://github.com/moskytw/nginx-contrib-vim">mosky</a> 的來用，後來就直接在<a href="https://github.com/othree/nginx-contrib-vim">自己的 repository</a> 上面修改了，改一陣子之後就開始想要推回 upstream，也就是 nginx 的程式庫，然後就開始了這段協工旅程(?)。</p>

<p>要發修改上 upstream，第一步自然是看一下<a href="http://nginx.org/en/docs/contributing_changes.html">如何貢獻</a>，節錄這邊幾個重點：</p>

<ol>
<li>用 <a href="http://mailman.nginx.org/mailman/listinfo/nginx-devel">nginx-devel</a> 這個 mailing list 做討論</li>
<li>發 patch 前有一些注意事項，不過我改 vim script 比較沒關係</li>
<li>Patch 也是用 email 發到 nginx-devel，有範例</li>
<li>推薦用 <a href="https://www.mercurial-scm.org/wiki/PatchbombExtension">patchbomb</a></li>
<li>要先簽 <a href="https://www.nginx.com/resources/wiki/contributing/cla/">CLA</a>（不過目前這條已經不見了，改成最後說發 patch 等於同意用他們專案的 LCIENSE）</li>
</ol>

<p>總之我就照這份，先去訂閱了 nginx-devel 觀察一陣子，然後就直接把我的<a href="http://mailman.nginx.org/pipermail/nginx-devel/2017-February/009489.html">修改</a>整個丟上去了，一開始是直接用 Gmail 發，把 patch 檔內容直接複製貼過去，產生 patch 檔的方法是：</p>

<pre><code>hg export &gt; something.patch
</code></pre>

<p><code>hg export</code> 會直接輸出最後一個 commit 的 patch 內容到 STDOUT，然後就直接用 Gmail 發過去，結果 review 的 <a href="http://mdounin.ru/">Maxim Dounin</a> 說他沒辦法 apply patch，可能是因為我的 mail client 的關係，建議我用 <a href="https://www.mercurial-scm.org/wiki/PatchbombExtension">patchbomb</a> 發，所以就研究搜尋了一下，發現他是直接發 email 的機制，所以要把帳號密碼都寫到設定內，找了一篇 Gmail 的<a href="http://blog.sidkalra.com/2009/02/using-gmail-with-hgs-patchbomb-extension/">設定範例</a>，搭配 Google account 的應用程式密碼，設定範例如下：</p>

<pre><code>[extensions]
hgext.patchbomb =

[email]
from=othree &lt;othree@gmail.com&gt;
to=nginx-devel@nginx.org
cc=othree@gmail.com
method=smtp

[smtp]
host=smtp.gmail.com
port=587
username=othree@gmail.com
password=[gmail_password]
tls=True
</code></pre>

<p>把這些資訊填入 <code>.hg/hgrc</code> 這個檔案內，然後就可以用 <code>hg email -o --test</code> 來測試看看，這個指令會把完整的原始信件內容，包括 header 等都顯示出來（丟到 STDOUT），如果正式要發就把 <code>--test</code> 拿掉就好了。</p>

<p>確認一切沒問題後，我就改用 patchbomb 發 patch 到 nginx-devel 了，結果還是被拒絕了，問題主要是這個 patch 一次修改太多，理想上應該是不同目的的修改放到不同 patch 內，當然這和我一開始的預想不一樣就是了，我一開始的想法是因為 contrib 這邊的東西，相對於 nginx 本體的原始碼來說比較次要，所以盡量減少 commit 數，其實如果我有先去問過應該是可以少繞這段路，總之，為了一個一個修改送出，我又開了一個 github repository，叫做 <a href="https://github.com/othree/nginx-contrib-vim-patch">nginx-contrib-vim-patch</a>，想要慢慢把我的 nginx-contrib-vim 內的更動搬過去，接著開始的，就是漫長的 review 和溝通了。</p>

<p>其實我完全沒想到 Maxim Dounin 會這麼認真的 review，不止會看我這樣改是要達到什麼目的，還有認真測試，結果被抓出一堆問題，雖然都是奇妙的 conf 寫法，合語法，但是應該不會有人這樣寫的 case，這些 case 我也開始慢慢收集到 github 上的 <a href="https://github.com/othree/nginx-conf-test">nginx-conf-test</a>，方便之後測試用，總之來回許久，終於有一部分比較簡單的東西先進去 nginx repository 了，然後我發現外部貢獻者都會在 <a href="https://nginx.org/en/CHANGES">change log</a> 那邊被感謝，我貢獻進去的目前應該都在 1.11.11 那版，其實只有把新的 directive 補上（core modules, 3rd party modules）和幾個 protocol 參數的 highlight，至於其他的修改還進不去，目前看起來會是一場長期抗戰，主要是因為 reviewer 對於期望的目標和我不一樣，目前大概會維持兩個版本吧，一邊弄<a href="https://github.com/othree/nginx-contrib-vim">自己希望的</a>，一邊抽東西送回去 upstream，不得不說主事者控制太緊會讓貢獻者動力被削減不少。</p>

<p>貢獻 nginx 的過程讓我體會到以前的開源協做的模式（應該是吧？），用 mailing list 溝通，發 Patch、code review、做討論，這些點來看，nginx 的流程其實是非常老派，和現在用 Github 做溝通、協做 的流程差很大，門檻也高不少，當然這不一定是壞事，還是要看專案性質，在 Github 這類平台上做這些協做流程的話，門檻降低了，其實可能隨之而來的問題就是太多人進來造成貢獻品質落差很大，反而會吃掉主力人員的時間，剛好今天也看到知乎上有一篇「<a href="https://www.zhihu.com/question/36292298/answer/160028010">維護一個大型開源專案是怎樣的體驗？</a>」，裡面就有提到 VSCode 的狀況，變成還需要排人專門處理 issue 和 PR，感覺就很可怕。</p>

<p>順帶一題，nginx 的固定貢獻者當中不少中國人啊。</p>
</b:mainContent>
				<b:extendContent>
</b:extendContent>
			</b:content>


		</b:entry>

		<b:entry entryID="000892" baseName="japan-new-year">
			<b:author>
				<b:authorName>othree</b:authorName>
				<b:authorEmail>othree@gmail.com</b:authorEmail>
				<b:authorUrl></b:authorUrl>
			</b:author>
			<b:datetime>
				<b:date>2017-04-11</b:date>
				<b:time>22:06:08</b:time>
			</b:datetime>
			<b:category>diary</b:category>
			<b:title>日本跨年</b:title>
			<b:content>
				<b:summary> 去年年底臨時冒出了個去日本關西跨年的行程，由於之前有聽聞日本新年可能會變空城，所以就認真的研究了一下行程，主要擔心的是 12/31 和 1/1 兩天，這趟住的地點是在大阪，考慮了幾個行程，其中 12/31 的選項是： 晚上早點買超市的晚餐回飯店看紅白，要跨年再看要不要去神社參拜 去京都一天，因為 12/31 到 1/1 終夜交通不會中斷，所以還可以考慮跨年參拜完才回來 1/1 則是： 環球影城玩整天 去看還很白的姬路城，1/1 有特別免費開放 後來的決定是 12/31 去京都一天，不過結果沒待到跨年，大概十二點前就回到大阪了，然後 1/1 去姬路城，因為環球影城 1/1 預期人會很多，連 pass 都買不到了，加上以後來應該也還不會有損失，但是姬路城應該只會越來越不白，不過後來才發現環球影城有顆金氏世界記錄的聖誕樹 最後一年展出... 總之，以下是 12/31 的清水寺：...</b:summary>
				<b:mainContent><p><a class="thumbnail" href="https://www.flickr.com/photos/othree/32146540906/" title="八坂神社 by othree, on Flickr"><img src="https://farm1.staticflickr.com/470/32146540906_eb9801be18_b.jpg" width="1024" height="683" alt="八坂神社, " srcset="https://farm1.staticflickr.com/470/32146540906_eb9801be18_b.jpg 1024w, https://farm1.staticflickr.com/470/32146540906_8915765235_h.jpg 1600w" /></a></p>

<p>去年年底臨時冒出了個去日本關西跨年的行程，由於之前有聽聞日本新年可能會變空城，所以就認真的研究了一下行程，主要擔心的是 12/31 和 1/1 兩天，這趟住的地點是在大阪，考慮了幾個行程，其中 12/31 的選項是：</p>

<ul>
<li>晚上早點買超市的晚餐回飯店看紅白，要跨年再看要不要去神社參拜</li>
<li>去京都一天，因為 12/31 到 1/1 終夜交通不會中斷，所以還可以考慮跨年參拜完才回來</li>
</ul>

<p>1/1 則是：</p>

<ul>
<li>環球影城玩整天</li>
<li>去看還很白的姬路城，1/1 有特別免費開放</li>
</ul>

<p>後來的決定是 12/31 去京都一天，不過結果沒待到跨年，大概十二點前就回到大阪了，然後 1/1 去姬路城，因為環球影城 1/1 預期人會很多，連 pass 都買不到了，加上以後來應該也還不會有損失，但是姬路城應該只會越來越不白，不過後來才發現環球影城有顆金氏世界記錄的<a href="https://twitter.com/hashtag/USJ%E3%83%A9%E3%82%B9%E3%83%88%E3%83%84%E3%83%AA%E3%83%BC?src=hash">聖誕樹</a> 最後一年展出...</p>

<p>總之，以下是 12/31 的清水寺：</p>
</b:mainContent>
				<b:extendContent><p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31374251433/" title="清水寺 by othree, on Flickr"><img src="https://farm1.staticflickr.com/455/31374251433_6516d8d58c_b.jpg" width="1024" height="683" alt="清水寺" srcset="https://farm1.staticflickr.com/455/31374251433_6516d8d58c_b.jpg 1024w, https://farm1.staticflickr.com/455/31374251433_0e5c7490cb_h.jpg 1600w" /></a></p>

<p>還有整修到一半的地方可以拍：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31343174914/" title="清水寺 by othree, on Flickr"><img src="https://farm1.staticflickr.com/681/31343174914_1c15753116_b.jpg" width="1024" height="683" alt="清水寺, " srcset="https://farm1.staticflickr.com/681/31343174914_1c15753116_b.jpg 1024w, https://farm1.staticflickr.com/681/31343174914_f777bcf9e3_h.jpg 1600w" /></a></p>

<p>二年坂、三年坂：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31374231273/" title="京都 by othree, on Flickr"><img src="https://farm1.staticflickr.com/372/31374231273_9d0dd55e07_b.jpg" width="1024" height="683" alt="京都, " srcset="https://farm1.staticflickr.com/372/31374231273_9d0dd55e07_b.jpg 1024w, https://farm1.staticflickr.com/372/31374231273_ae454b0cb8_h.jpg 1600w" /></a></p>

<p>人是很多，不過好像也沒比櫻花季多就是，午餐就在這邊路上的茶寮都路里吃的，沿路還買了不少東西吃，八坂神社那邊也不少攤販。</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/32146503696/" title="八坂神社 by othree, on Flickr"><img src="https://farm1.staticflickr.com/632/32146503696_ebdb936c70_b.jpg" width="1024" height="683" alt="八坂神社, " srcset="https://farm1.staticflickr.com/632/32146503696_ebdb936c70_b.jpg 1024w, https://farm1.staticflickr.com/632/32146503696_a86795c18c_h.jpg 1600w" /></a></p>

<p>然後很多車站都有貼當天限定的終夜電車時刻表，下面是在稻荷大社拍的：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31809406240/" title="京都 by othree, on Flickr"><img src="https://farm1.staticflickr.com/769/31809406240_89f640caf8_b.jpg" width="1024" height="683" alt="京都, " srcset="https://farm1.staticflickr.com/769/31809406240_89f640caf8_b.jpg 1024w, https://farm1.staticflickr.com/769/31809406240_679d92aeb9_h.jpg 1600w" /></a></p>

<p>還準備了臨時入口要應付人潮：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/32184301305/" title="伏見稻荷大社 by othree, on Flickr"><img src="https://farm1.staticflickr.com/259/32184301305_9297a52a44_b.jpg" width="1024" height="683" alt="伏見稻荷大社, " srcset="https://farm1.staticflickr.com/259/32184301305_9297a52a44_b.jpg 1024w, https://farm1.staticflickr.com/259/32184301305_45cbb30bd6_h.jpg 1600w" /></a></p>

<p>不過我們去的時間還蠻早的，所以還沒啟用，倒是有些攤位都已經開張了：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31809385180/" title="伏見稻荷大社 by othree, on Flickr"><img src="https://farm1.staticflickr.com/760/31809385180_16ea7bf524_b.jpg" width="1024" height="683" alt="伏見稻荷大社, " srcset="https://farm1.staticflickr.com/760/31809385180_16ea7bf524_b.jpg 1024w, https://farm1.staticflickr.com/760/31809385180_20fa389ed0_h.jpg 1600w" /></a></p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/32066349271/" title="伏見稻荷大社 by othree, on Flickr"><img src="https://farm1.staticflickr.com/685/32066349271_9eaa940677_b.jpg" width="1024" height="683" alt="伏見稻荷大社, " srcset="https://farm1.staticflickr.com/685/32066349271_9eaa940677_b.jpg 1024w, https://farm1.staticflickr.com/685/32066349271_70fa8d00ae_h.jpg 1600w" /></a></p>

<p>特別要說這個就是所謂的厚切牛舌：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31343022084/" title="伏見稻荷大社 by othree, on Flickr"><img src="https://farm1.staticflickr.com/261/31343022084_14ba10cdbb_b.jpg" width="1024" height="683" alt="伏見稻荷大社, " srcset="https://farm1.staticflickr.com/261/31343022084_14ba10cdbb_b.jpg 1024w, https://farm1.staticflickr.com/261/31343022084_665fcb63a8_h.jpg 1600w" /></a></p>

<p>烤好的：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/32066327651/" title="伏見稻荷大社 by othree, on Flickr"><img src="https://farm1.staticflickr.com/634/32066327651_f573b06301_b.jpg" width="1024" height="683" alt="伏見稻荷大社, " srcset="https://farm1.staticflickr.com/634/32066327651_f573b06301_b.jpg 1024w, https://farm1.staticflickr.com/634/32066327651_de5f4d1bfc_h.jpg 1600w" /></a></p>

<p>要回大阪前，發現平常往觀光區（清水寺）的那排公車站，全部變成往北野天滿宮的專車：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31342958224/" title="京都 by othree, on Flickr"><img src="https://farm1.staticflickr.com/491/31342958224_41f40fd676_b.jpg" width="1024" height="683" alt="京都, " srcset="https://farm1.staticflickr.com/491/31342958224_41f40fd676_b.jpg 1024w, https://farm1.staticflickr.com/491/31342958224_60a74a1982_h.jpg 1600w" /></a></p>

<p>據說北野天滿宮的新年參拜人潮是全日本最多的，看來所言不假。</p>

<p>然後是 1/1 的姬路，雖然百貨商場都沒開，不過商店街還是有些店面和吃的有開，而且挑到還不錯吃的穴子魚專門店，<a href="http://www.himeji-anago-iccyoura.com/">一張羅</a>：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/32060711152/" title="姬路 by othree, on Flickr"><img src="https://farm1.staticflickr.com/441/32060711152_a8487254e4_b.jpg" width="1024" height="683" alt="姬路, " srcset="https://farm1.staticflickr.com/441/32060711152_a8487254e4_b.jpg 1024w, https://farm1.staticflickr.com/441/32060711152_80efe75024_h.jpg 1600w" /></a></p>

<p>姬路城城區很大，看起來保存的很完整，從車站出來就看的到，很漂亮：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31833769060/" title="姬路城 by othree, on Flickr"><img src="https://farm1.staticflickr.com/303/31833769060_d804c1c92b_b.jpg" width="1024" height="683" alt="姬路城, " srcset="https://farm1.staticflickr.com/303/31833769060_d804c1c92b_b.jpg 1024w, https://farm1.staticflickr.com/303/31833769060_351363a411_h.jpg 1600w" /></a></p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/32171317826/" title="姬路城 by othree, on Flickr"><img src="https://farm1.staticflickr.com/637/32171317826_e1ed4da92b_b.jpg" width="1024" height="683" alt="姬路城, " srcset="https://farm1.staticflickr.com/637/32171317826_e1ed4da92b_b.jpg 1024w, https://farm1.staticflickr.com/637/32171317826_c076c179ab_h.jpg 1600w" /></a></p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31368031054/" title="姬路城 by othree, on Flickr"><img src="https://farm1.staticflickr.com/631/31368031054_aae9f81d44_b.jpg" width="1024" height="683" alt="姬路城, " srcset="https://farm1.staticflickr.com/631/31368031054_aae9f81d44_b.jpg 1024w, https://farm1.staticflickr.com/631/31368031054_03f7e53465_h.jpg 1600w" /></a></p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31399045233/" title="姬路城 by othree, on Flickr"><img src="https://farm1.staticflickr.com/721/31399045233_f8c12f10b4_b.jpg" width="1024" height="683" alt="姬路城, " srcset="https://farm1.staticflickr.com/721/31399045233_f8c12f10b4_b.jpg 1024w, https://farm1.staticflickr.com/721/31399045233_f8524d845c_h.jpg 1600w" /></a></p>

<p>不過天守閣我就覺得沒這麼值得了，一來當天免費，所以排隊的人很多，花了很多時間在這，二來上去之後，窗戶的鐵網格子超小的，看外面的東西都覺得很受干擾：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31399067753/" title="姬路城 by othree, on Flickr"><img src="https://farm1.staticflickr.com/665/31399067753_d268766291_b.jpg" width="1024" height="683" alt="姬路城, " srcset="https://farm1.staticflickr.com/665/31399067753_d268766291_b.jpg 1024w, https://farm1.staticflickr.com/665/31399067753_67e151a152_h.jpg 1600w" /></a></p>

<p>回到大阪後發現 Yodobashi 梅田有開，所以晚餐就在那邊解決，順便逛了一下，還買到九折的 iTunes 點數（剛好有活動），就這樣順利的度過了 1/1，然後 1/2 開始各家百貨和商店就都開始營業了，到處都是福袋，日本人也都全部出來採買，看到比較特別的像是麵包店的、Mister Donut，還有 Pokemon Center 等都有，不過這次是都沒買啦，小可惜。</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31399160683/" title="姬路 by othree, on Flickr"><img src="https://farm1.staticflickr.com/402/31399160683_35252ba95d_b.jpg" width="1024" height="683" alt="姬路, " srcset="https://farm1.staticflickr.com/402/31399160683_35252ba95d_b.jpg 1024w, https://farm1.staticflickr.com/402/31399160683_edcc508d72_h.jpg 1600w" /></a></p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/31418206723/" title="Pokemon Center by othree, on Flickr"><img src="https://farm1.staticflickr.com/372/31418206723_715d2f3017_b.jpg" width="1024" height="683" alt="Pokemon Center, " srcset="https://farm1.staticflickr.com/372/31418206723_715d2f3017_b.jpg 1024w, https://farm1.staticflickr.com/372/31418206723_a1ee511845_h.jpg 1600w" /></a></p>
</b:extendContent>
			</b:content>


		</b:entry>

		<b:entry entryID="000891" baseName="github-flavored-markdown">
			<b:author>
				<b:authorName>othree</b:authorName>
				<b:authorEmail>othree@gmail.com</b:authorEmail>
				<b:authorUrl></b:authorUrl>
			</b:author>
			<b:datetime>
				<b:date>2017-03-27</b:date>
				<b:time>20:41:56</b:time>
			</b:datetime>
			<b:category>web</b:category>
			<b:title>GitHub Flavored Markdown 標準規範</b:title>
			<b:content>
				<b:summary> 前陣子看到 DK 提到 GitHub 的 Markdown：GitHub Flavored Markdown 發表正式的 spec 了，當時有大概看了一下內容，不過昨天才有空寫出來（然後今天也看到碼天狗有提到這件事），基本上這份 spec 是基於 CommonMark 的，只是多了一些語法，包括： 刪除線 表格 待辦清單 自動連結（包括網址和 email） Raw HTML 黑名單： &lt;title&gt; &lt;textarea&gt; &lt;style&gt; &lt;xmp&gt; &lt;iframe&gt; &lt;noembed&gt; &lt;noframes&gt; &lt;script&gt; &lt;plaintext&gt; 新增的部分都有很顯眼的標註，其中 Raw HTML 黑名單的 HTML 標籤的 &lt;...</b:summary>
				<b:mainContent><p><a class="thumbnail" href="https://www.flickr.com/photos/othree/15576500626/" title="Github Markdown Cheat Sheet by othree, on Flickr"><img src="https://farm6.staticflickr.com/5599/15576500626_b56732d883_b.jpg" width="1024" height="683" alt="Github Markdown Cheat Sheet" srcset="https://farm6.staticflickr.com/5599/15576500626_b56732d883_b.jpg 1024w, https://farm6.staticflickr.com/5599/15576500626_e0027ae0fb_h.jpg 1600w" /></a></p>

<p>前陣子看到 DK <a href="https://blog.gslin.org/archives/2017/03/16/7187/">提到</a> GitHub 的 Markdown：<a href="https://guides.github.com/features/mastering-markdown/#GitHub-flavored-markdown">GitHub Flavored Markdown</a> <a href="https://githubengineering.com/a-formal-spec-for-github-markdown/">發表正式的 spec</a> 了，當時有大概看了一下內容，不過昨天才有空寫出來（然後今天也看到碼天狗有提到這件事），基本上這份 <a href="https://github.github.com/gfm/">spec</a> 是基於 <a href="http://commonmark.org/">CommonMark</a> 的，只是多了一些語法，包括：</p>

<ul>
<li>刪除線</li>
<li>表格</li>
<li><a href="https://github.com/blog/1375-task-lists-in-gfm-issues-pulls-comments">待辦清單</a></li>
<li>自動連結（包括網址和 email）</li>
<li>Raw HTML 黑名單：
<ul>
<li><code>&lt;title&gt;</code></li>
<li><code>&lt;textarea&gt;</code></li>
<li><code>&lt;style&gt;</code></li>
<li><code>&lt;xmp&gt;</code></li>
<li><code>&lt;iframe&gt;</code></li>
<li><code>&lt;noembed&gt;</code></li>
<li><code>&lt;noframes&gt;</code></li>
<li><code>&lt;script&gt;</code></li>
<li><code>&lt;plaintext&gt;</code></li>
</ul></li>
</ul>

<p>新增的部分都有很顯眼的標註，其中 Raw HTML 黑名單的 HTML 標籤的 <code>&lt;</code> 都會被轉成 entity，基本上看起來是安全性考量，不過不太確定為何有些很老的標籤出現，感覺上和安全性比較沒關係。另外我還注意到 <a href="https://help.github.com/articles/basic-writing-and-formatting-syntax/#using-emoji">emoji</a>和<a href="https://help.github.com/articles/basic-writing-and-formatting-syntax/#referencing-issues-and-pull-requests">reference link</a>沒包含在這份 spec 內，emoji 或許是因為實做上的問題，轉成 unicode 字元相容性不好，要用 img 會有不少相依性問題，而 reference link 大概是因這是比較針對 GitHub 網站的特性。</p>

<p>GitHub 轉換 Markdown 引擎的過程也有在文中說明，這次 Markdown 引擎是從 <a href="https://github.com/vmg/sundown">Sundown</a>（更早是 Ruby 實做的 <a href="https://github.com/vmg/redcarpet">redcarpet</a> 的樣子）改成 <a href="https://github.com/jgm/cmark">cmark</a>，當然為了這些新語法，他們 fork 了<a href="https://github.com/github/cmark">自己的版本出來</a>，然後在真的套上 GitHub 本站前，有先做過測試，結果發現有 1% 的文件（所有的 Markdown 文件，包括 user comment、issue...etc）會受到影響，而且判斷方法不是單純 diff 輸出結果，而是 diff 正規化過的 HTML 文件樹，不過即使只有 1% 的文件，那也是很大量，後來他們又更仔細分析，發現會受影響的幾乎都是 issue、user comment 之類的內容，是存放在 GitHub 資料庫內的，而不是 repository 內的文件，所以他們可以直接修改，如果是 repository 內的文件，因為要看 sha1 hash，所以是改不了的，後來他們魔改 Sundown，讓它吃舊文件然後吐出符合新 spec 的 Markdown 文件，接著跑了幾天把全部需要修改的舊文件（1%）都轉完，所以現在除了少數文件外，剩下的文件都是符合 GFM spec 的文件了。</p>
</b:mainContent>
				<b:extendContent>
</b:extendContent>
			</b:content>


		</b:entry>

		<b:entry entryID="000890" baseName="github-license-summary">
			<b:author>
				<b:authorName>othree</b:authorName>
				<b:authorEmail>othree@gmail.com</b:authorEmail>
				<b:authorUrl></b:authorUrl>
			</b:author>
			<b:datetime>
				<b:date>2017-03-26</b:date>
				<b:time>20:16:11</b:time>
			</b:datetime>
			<b:category>web</b:category>
			<b:title>GitHub 提供專案授權簡介與概要</b:title>
			<b:content>
				<b:summary> 大概上週看到有人在 Twitter 講到 GitHub 現在會在專案上顯示該專案所使用授權條款的摘要，長的像是上面那樣，官方也有發表公告，其實這個修改是結合之前的授權偵測和 Choose a License。 Choose a License 也是一個 GitHub 的附加服務，用來協助使用者挑選適合的授權條款，現在在 GitHub 建立新的專案時，可以順便初始化專案，包括建立 README、產生 .gitignore 和挑選要使用的授權條款： 授權條款旁邊的 i 點下去其實就會送到 Choose a License 網站去了（不過兩邊沒有連動接起來就是），Choose a License 網站則針對每種條款都一份重點摘要，分為 Permissions、Conditions 和 Limitations 三個區塊，分別條列出該條款可以做什麼（例如商業使用）、有什麼條件（例如需要也使用相同條款授權）和條款的限制（例如免責），而現在 GitHub 上顯示的條款摘要其實就是這邊的資訊搬過來的： Choose a License 網站其實有很多授權條款的整理，而不是只有常見的幾種，可以看...</b:summary>
				<b:mainContent><p><a class="thumbnail" href="https://www.flickr.com/photos/othree/32722736844/" title="Do What The F*ck You Want To Public License by othree, on Flickr"><img src="https://farm3.staticflickr.com/2898/32722736844_c977dc8ff8_b.jpg" width="1024" height="595" alt="Do What The F*ck You Want To Public License, " srcset="https://farm3.staticflickr.com/2898/32722736844_c977dc8ff8_b.jpg 1024w, https://farm3.staticflickr.com/2898/32722736844_e56ae26374_h.jpg 1600w" /></a></p>

<p>大概上週看到有人在 Twitter 講到 GitHub 現在會在專案上顯示該專案所使用授權條款的摘要，長的像是上面那樣，官方也有發表<a href="https://github.com/blog/2335-open-source-license-descriptions-and-metadata">公告</a>，其實這個修改是結合之前的<a href="https://github.com/blog/2252-license-now-displayed-on-repository-overview">授權偵測</a>和 <a href="https://choosealicense.com/">Choose a License</a>。</p>

<p>Choose a License 也是一個 GitHub 的附加服務，用來協助使用者挑選適合的授權條款，現在在 GitHub 建立新的專案時，可以順便初始化專案，包括建立 README、產生 <code>.gitignore</code> 和挑選要使用的授權條款：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/33495590202/" title="Initialize Project by othree, on Flickr"><img src="https://farm4.staticflickr.com/3953/33495590202_f04d677f58_b.jpg" width="722" height="141" alt="Initialize Project" srcset="https://farm4.staticflickr.com/3953/33495590202_f04d677f58_b.jpg 1024w" /></a></p>

<p>授權條款旁邊的 i 點下去其實就會送到 Choose a License 網站去了（不過兩邊沒有連動接起來就是），Choose a License 網站則針對每種條款都一份重點摘要，分為 Permissions、Conditions 和 Limitations 三個區塊，分別條列出該條款可以做什麼（例如商業使用）、有什麼條件（例如需要也使用相同條款授權）和條款的限制（例如免責），而現在 GitHub 上顯示的條款摘要其實就是這邊的資訊搬過來的：</p>

<p><a class="thumbnail" href="https://www.flickr.com/photos/othree/33495653292/" title="Choose a License by othree, on Flickr"><img src="https://farm4.staticflickr.com/3770/33495653292_b2822ac569_b.jpg" width="1024" height="601" alt="Choose a License" srcset="https://farm4.staticflickr.com/3770/33495653292_b2822ac569_b.jpg 1024w, https://farm4.staticflickr.com/3770/33495653292_0a6bd0bf6e_h.jpg 1600w" /></a></p>

<p>Choose a License 網站其實有很多授權條款的整理，而不是只有常見的幾種，可以看 <a href="https://choosealicense.com/appendix/">appendix</a> 頁面有完整清單，可惜裡面沒有 <a href="https://github.com/vim/vim/blob/master/runtime/doc/uganda.txt">Vim License</a>，另外特別想說的是 GitHub 自己（應該沒錯）提供的 <a href="https://choosealicense.com/licenses/unlicense/">Unlincense</a>，相似於創作領域的 <a href="http://creativecommons.tw/cc0">CC0</a>，就類似丟到 Public Domain 的意思，不過保留了免責條款，講到免責聲明，就還要順便提一下 <a href="https://choosealicense.com/licenses/wtfpl/">WTFPL</a>，它其實也是超自由的 License，差別就是連免責聲明都沒，其實是更加接近丟到 Public Domain 吧？</p>

<p>最後想說的是 GitHub 用來判斷專案使用的授權，用的是 <a href="https://github.com/benbalter/licensee">licensee</a> 這個 Ruby Gem，看起來完全就是為了做這些事情寫的，我看好像也沒其他類似功能的專案，作者 Ben Balter 其實也是 GitHub 員工。</p>
</b:mainContent>
				<b:extendContent>
</b:extendContent>
			</b:content>


		</b:entry>

		<b:entry entryID="000889" baseName="gitdags-git">
			<b:author>
				<b:authorName>othree</b:authorName>
				<b:authorEmail>othree@gmail.com</b:authorEmail>
				<b:authorUrl></b:authorUrl>
			</b:author>
			<b:datetime>
				<b:date>2017-03-25</b:date>
				<b:time>21:49:34</b:time>
			</b:datetime>
			<b:category>software</b:category>
			<b:title>Gitdags, Git 示意圖工具</b:title>
			<b:content>
				<b:summary> 最近因緣際會，需要畫些圖來教 Git，不是要拿真的 repository 來畫，當然可以用繪圖軟體刻，不過時間不夠，而且覺得應該之前就有人有需求了，應該有現成的工具，所以我就找了一下看有沒有方便的工具可以畫，結果很幸運的，沒多久就找到了 gitdags 這個 Latex 的 package，專門就是用來畫教學用的 Git 圖，而且圖的樣版還蠻接近 Pro Git v1 書內的樣子（v2 的樣版改的更簡潔了），看起來還蠻 ok 的，它是基於 TikZ 這個 package，是 Latex 上的繪圖 library，可以產生出向量格式的圖，所以我可以用 pdf2latex 先轉成 pdf，pdf 檔案就可以給 Keynote 用了，不過要通用一點，還可以用 pdf2svg 生成 SVG 圖檔，SVG 內容看起來也還蠻乾淨的，tex 文件內容大概像這樣： \documentclass[preview]{standalone} \usepackage{gitdags} \begin{document}...</b:summary>
				<b:mainContent><p><a class="thumbnail" href="https://www.flickr.com/photos/othree/33595934396/" title="cherrypick-2 by othree, on Flickr"><img src="https://farm3.staticflickr.com/2881/33595934396_3da08a8f62_b.jpg" width="1024" height="384" alt="cherrypick-2" srcset="https://farm3.staticflickr.com/2881/33595934396_3da08a8f62_b.jpg 1024w, https://farm3.staticflickr.com/2881/33595934396_96d863038c_h.jpg 1600w" /></a></p>

<p>最近因緣際會，需要畫些圖來教 Git，不是要拿真的 repository 來畫，當然可以用繪圖軟體刻，不過時間不夠，而且覺得應該之前就有人有需求了，應該有現成的工具，所以我就找了一下看有沒有方便的工具可以畫，結果很幸運的，沒多久就找到了 <a href="https://github.com/Jubobs/gitdags">gitdags</a> 這個 Latex 的 package，專門就是用來畫教學用的 Git 圖，而且圖的樣版還蠻接近 Pro Git v1 書內的<a href="https://git-scm.com/book/en/v1/Git-Branching-Basic-Branching-and-Merging">樣子</a>（v2 的樣版改的更<a href="https://git-scm.com/book/en/v2/Git-Branching-Basic-Branching-and-Merging">簡潔</a>了），看起來還蠻 ok 的，它是基於 <a href="http://www.texample.net/tikz/">TikZ</a> 這個 package，是 Latex 上的繪圖 library，可以產生出向量格式的圖，所以我可以用 pdf2latex 先轉成 pdf，pdf 檔案就可以給 Keynote 用了，不過要通用一點，還可以用 pdf2svg 生成 SVG 圖檔，SVG 內容看起來也還蠻乾淨的，tex 文件內容大概像這樣：</p>

<pre><code>\documentclass[preview]{standalone}
\usepackage{gitdags}

\begin{document}
    \centering
    \begin{tikzpicture}
      % Commit DAG
      \gitDAG[grow right sep = 2em]{
        0 -- {
          1 -- 2 -- 3 -- 4,
          A
        }
      };
      \gitbranch
        {master}     % node name and text 
        {above=of 4} % node placement
        {4}          % target
      \gitbranch
        {for-rebase} % node name and text 
        {below=of A} % node placement
        {A}          % target
      \gitHEAD
        {below=of for-rebase} % node placement
        {for-rebase} 
      \end{tikzpicture}
\end{document}
</code></pre>

<p>產生的圖片就像是最上面的圖，gitdags 是用 <a href="http://ethanschoonover.com/solarized">solarized</a> 來配色，我覺得顏色不是很精緻，不過還可以接受，另外我有自己調整一版黑底用的，把線條和邊框改淺，還有把 commit node 的形狀調整了一下，也放在 <a href="https://github.com/othree/gitdags">GtiHub 上</a>。使用 gitdags 的過程，比較大的問題就是文件和範例不足，所以我把自己畫的部分<a href="https://github.com/othree/git-graph">全部丟上 GitHub</a> 了，後來發現原作者也有<a href="https://github.com/Jubobs/talks/tree/e1cfbd07587ac90c1602a6901260a798b858e727/corkdev-oct2015">一些 sample</a> 可以參考，作者自己兩年前是說有要寫文件和準備範例，不過後來就都沒動靜就是了。如果要在 Mac 上處理 Latex 文件，一般就是建議直接裝 <a href="http://www.tug.org/mactex/">MacTeX</a> 就好，不過 gitdags 沒包在裡面，所以要自己安裝，或是把 sty 檔案和 Tex 文件放在同一個目錄也可以。</p>

<p>不過用 pdf2svg 產生的 SVG 檔我用 AI 要編輯時會發現有些問題，我有另外試著用 <a href="https://inkscape.org/en/">inkscape</a> 做轉換，出來的文字大小是正常的，不過看起來字形和間距不太正確就是，如果要轉 PNG 之類的非向量格式是可以直接用 Preview 或是 convert 轉換，不過解析度要設定一下，通常預設的 150，輸出的圖片大小是不太夠就是了，上面那張我是設定 450。</p>

<p>最後，gitdags 這名字裡面的 dag 應該是<a href="http://www.csie.ntnu.edu.tw/~u91029/DirectedAcyclicGraph.html">有向無環圖</a>（Directed Acyclic Graph）的意思，這種圖剛好可以用來描述 Git 裡面 commit、branch 等東西之間的關係。</p>
</b:mainContent>
				<b:extendContent>
</b:extendContent>
			</b:content>


		</b:entry>

	</b:entries>
</b:blog>
