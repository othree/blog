<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh-cmn-Hant-TW" prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="utf-8"/>
    <title>mod_perl 跑 MT : O3noBLOG</title>
    <meta name="description" content="今天總算是測試成功了，之前測試到程式路徑位置不對後就暫時放棄了，今天又努力了許多小時，總算是把這設定搞定了，至於跑起來的感覺，其實沒很明顯，畢竟還只有在自己電腦上跑，等過兩天弄上現在這台server，再來把全部檔案都重建好測試一下:P..."/>
    <meta name="keywords" content="othree, ooo, blog, acg, html, css, javascript, vim, web page design"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
    <link rel="icon" href="/favicon-32x32.png" sizes="32x32"/>
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/apple-touch-icon.png"/>
    <!--
- Graphics Title: 33-20e3.svg
- Graphics Author: Copyright 2020 Twitter, Inc and other contributors (https://github.com/twitter/twemoji)
- Graphics Source: https://github.com/twitter/twemoji/blob/master/assets/svg/33-20e3.svg
- Graphics License: CC-BY 4.0 (https://creativecommons.org/licenses/by/4.0/)
	-->
    <link rel="preconnect" href="https://fonts.bunny.net" crossorigin="anonymous"/>
    <link href="https://fonts.bunny.net/css?family=jetbrains-mono:400|press-start-2p:400" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" lazyload="lazyload" href="/stylesheets/all.css"/>
    <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="https://feeds.feedburner.com/othree"/>
    <link rel="made" href="mailto:othree@gmail.com"/>
    <link rel="prev" title="感冒第四天" href="/log/2003/12/18/catch-cold-day-4/"/>
    <link rel="up" title="上一層" href="../"/>
    <link rel="top" title="首頁" href="/"/>
    <link rel="canonical" href="https://blog.othree.net/log/2003/12/19/run-mt-under-mod-perl/"/>
    <link rel="amphtml" href="https://blog.othree.net/log/2003/12/19/run-mt-under-mod-perl/amp/"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:creator" content="@othree"/>
    <meta property="og:title" content="mod_perl 跑 MT"/>
    <meta property="og:description" content="今天總算是測試成功了，之前測試到程式路徑位置不對後就暫時放棄了，今天又努力了許多小時，總算是把這設定搞定了，至於跑起來的感覺，其實沒很明顯，畢竟還只有在自己電腦上跑，等過兩天弄上現在這台server，再來把全部檔案都重建好測試一下:P..."/>
    <meta property="og:url" content="https://blog.othree.net/log/2003/12/19/run-mt-under-mod-perl/"/>
    <meta property="og:type" content="article"/>
    <meta property="og:image" content="https://blog.othree.net/images/O3-240x240.png"/>
    <meta property="og:image:width" content="240"/>
    <meta property="og:image:height" content="240"/>
    <meta name="twitter:widgets:csp" content="on"/>
    <meta property="fb:admins" content="582724207"/>
  </head>
  <body itemscope="itemscope" itemtype="http://schema.org/Blog">
    <nav>
      <div class="nav-inner">
        <form method="get" id="nav-search" class="navbar-search o-hidden" action="https://duckduckgo.com/" role="search">
          <input id="search" type="search" name="q" size="20" tabindex="8" aria-label="搜尋" placeholder="搜尋" required="required" aria-required="true" class="search-query input-medium"/>
          <input type="hidden" name="sites" value="blog.othree.net"/>
        </form>
        <div class="pure-menu pure-menu-horizontal">
          <a href="/" class="pure-menu-item">
                    首頁
                </a>
          <a href="/log/" accesskey="3" class="pure-menu-item pure-menu-selected" id="pure-menu-selected">
                    彙整
                </a>
          <a href="/blogroll/" title="BLOGROLL" class="pure-menu-item">
                    部落滾
                </a>
          <a href="/about/me/" class="pure-menu-item">
                    About
                </a>
          <a href="https://github.com/othree" target="_blank" class="pure-menu-item icon github" title="GitHub">
            <img src="/images/github.svg" width="24" height="24" alt="GitHub"/>
          </a>
        </div>
      </div>
    </nav>
    <div id="container" class="container">
      <header role="banner" class="pure-g">
        <h1 class="pure-u-1">
          <a href="/" accesskey="1" title="O3noBLOG">O3noBLOG</a>
        </h1>
      </header>
      <div class="pure-g layout">
        <div id="page-info" class="span9">
          <div class="row">
            <div class="span6">
              <h2>單篇彙整</h2>
            </div>
            <div id="page-nav" class="span2">
              <a href="../">上一層</a>
              <!--fix for ie-->
            </div>
          </div>
        </div>
        <main id="content" role="main" class="pure-u-1 pure-u-lg-3-4">
          <hr/>
          <article itemprop="blogPost" itemscope="itemscope" itemtype="http://schema.org/BlogPosting" id="entry-run-mt-under-mod-perl">
            <header>
              <time itemprop="datePublished dateModified" datetime="2003-12-19T02:36:22" id="date-2003-12-19">
                <span class="mon">12月</span>
                <span class="day">19日</span>
              </time>
              <h3 itemprop="name headline">
                <a itemprop="mainEntityOfPage" href="/log/2003/12/19/run-mt-under-mod-perl/">mod_perl 跑 MT</a>
              </h3>
            </header>
            <section itemprop="articleBody"><p>今天總算是測試成功了，之前測試到程式路徑位置不對後就暫時放棄了，今天又努力了許多小時，總算是把這設定搞定了，至於跑起來的感覺，其實沒很明顯，畢竟還只有在自己電腦上跑，等過兩天弄上現在這台server，再來把全部檔案都重建好測試一下:P</p><p>我安裝的環境是Windows XP Pro，用的軟體是Apache 1.3.24、ActivePerl 5.8.2.808（請一定要用5.8.x版，原因後述）、mod_perl 1.29_01-dev、libapreq 1.2，其中Apache和ActivePerl的安撞方法就不在多說了，這應該很多地方都找的到相關資訊，因此接下來是從mod_perl的安裝說起，另外還有一點要先說的是我的Apache是裝在<strong>D:/Apache/</strong>裡，ActivePerl是裝在<strong>D:/usr/</strong>裡，後面就不會再特別講了。</p>

<p>首先是mod_perl，因為我用的是Apache 1.3x，所以mod_perl也只能裝1.x版，依照mod_perl官方網頁的<a href="http://perl.apache.org/docs/1.0/os/win32/install.html#PPM_Packages" title="mod_perl官方網站－mod_perl 1.0在win32下以PPM Package安裝的說明">安裝說明</a>，我用的是ActivePerl 5.8.2.808，所以不能簡單的直接用ppm一個指令就裝好，要先set repository alias location（我不會翻，不過大概就是給一個server，好讓ppm用他根據package名稱搜尋ppd）。我直接把從DOS到進入PPM shell到安裝完的mod_perl的指令列出來：</p>

<pre><code>D:\&gt;ppm
ppm&gt; rep add http://theoryx5.uwinnipeg.ca/cgi-bin/ppmserver?urn:/PPMServer58
ppm&gt; install mod_perl-1</code></pre>

<p>其中要注意的是最後一行的「ppm&gt;install mod_perl-1」最後的那個「-1」是一定要有的，沒有他的話會裝到mod_perl 1.99-dev，是給Apache 2用的。當輸入最後一行指令後一會兒，他會要求你輸入mod_perl.so這個檔案要放的位置，我的例子是「<strong>D:/Apache/modules/</strong>」，連磁碟代碼都要輸入以確保不會出問題喔。</p>

<p>第一歩安裝mod_perl完成後，再來就要安裝libapreq了，這是MT要求的，詳細資料可以在[MT官方使用手冊 (Jedi 翻譯的中文版MT官方使用手冊－替換環境－mod_perl)":http://mtbook.org/mtmanual_alternate.html#mod_perl"]中找到，這份文件很重要，最後一步的設定也要靠它。總之，要MT在mod_perl下跑就會需要libapreq，然而libapreq一定要ActivePerl 5.8以後的版本才能裝，這也就是為什麽我們需要ActivePerl 5.8.x了。如果你的動作沒有太快的話，你應該還在PPM shell裡，輸入下面的指令</p>

<pre><code>ppm&gt; install libapreq-1</code></pre>

<p>同上，後面的「-1」不要砍掉，不然好像是會裝到mod_perl 2用的版本。接著等一會兒應該就會裝完了，這時你可以輸入已下指令離開PPM shell，亦或是直接把命令提示字元的視窗關掉。</p>

<pre><code>ppm&gt; exit</code></pre>

<p>如果以上動作都完成的話，那就只剩下最後的設定了，首先是Apache的設定，我是直接用官方使用手冊上的第二種設定，假設你的httpd.conf都還沒做過關於mod_perl相關的變動的話，那直接在檔案最後貼上下面的設定值，並修改其中的幾個路徑，應該就OK了。</p>

<pre><code>LoadFile /usr/bin/perl58.dll
LoadModule perl_module modules/mod_perl.so
&lt;IfModule mod_perl.c&gt;
&lt;Perl&gt;
use lib 'D:/Apache/MT/lib';
use lib 'D:/Apache/MT/extlib';
&lt;/Perl&gt;
PerlModule MT::App::CMS
&lt;Location /MT/app&gt;
SetHandler perl-script
PerlHandler MT::App::CMS
PerlSetVar MTConfig D:/Apache/MT/mt.cfg
&lt;/Location&gt;
PerlModule MT::App::Comments
&lt;Location /MT/comments&gt;
SetHandler perl-script
PerlHandler MT::App::Comments
PerlSetVar MTConfig D:/Apache/MT/mt.cfg
&lt;/Location&gt;
PerlModule MT::App::Trackback
&lt;Location /MT/trackback&gt;
SetHandler perl-script
PerlHandler MT::App::Trackback
PerlSetVar MTConfig D:/Apache/MT/mt.cfg
&lt;/Location&gt;
PerlModule MT::App::Search
&lt;Location /MT/search&gt;
SetHandler perl-script
PerlHandler MT::App::Search
PerlSetVar MTConfig D:/Apache/MT/mt.cfg
&lt;/Location&gt;
PerlModule Apache::XMLRPC::Lite
PerlModule MT::XMLRPCServer
&lt;Location /MT/xmlrpc&gt;
SetHandler perl-script
PerlHandler Apache::XMLRPC::Lite
PerlSetVar dispatch_to "blogger, metaWeblog, mt"
PerlSetVar MTConfig D:/Apache/MT/mt.cfg
&lt;/Location&gt;
&lt;/IfModule&gt;</code></pre>

<p>有些人應該會注意到我的MT程式並不是放在htdocs裡面，事實上，放在裡面會出些奇怪的問題，後來移出來後就沒這個問題了（很神秘，而且IE不會出問題），這點也是我剛剛漏掉忘記講的一點。<strong>請把MT資料夾移出htdocs，並用ScriptAlias指向</strong>，這邊也提供我的設定做範例。</p>

<pre><code>ScriptAlias /MT/ "D:/Apache/MT/"</code></pre>

<p>Apache的設定就只有上面那樣而已，假設這部份沒錯的話，Apache應該可以正常的跑起來，不過要完成全部的安裝程序，我們還需要要調整MT裡的設定檔，mt.cfg，在<a href="http://mtbook.org/mtmanual_alternate.html#mod_perl" title="Jedi 翻譯的中文版MT官方使用手冊－替換環境－mod_perl">MT官方使用手冊</a>中最後面有講到需要修改的幾項數值，如果你的mt.cfg檔案都沒動過的話，那你只需要改前三項，剩下四項就是他原來的預設值。</p>

<pre><code>CGIPath http://我的.伺服器.com/mt/
DataSource /路徑/指到/db
StaticWebPath /mt-靜態-網頁/</code></pre>

<p>我的例子是</p>

<pre><code>CGIPath http://localhost/MT/
DataSource D:/apache/MT/db
StaticWebPath /mt-static</code></pre>


<p>localhost是因為我只在本地端作測試的關係。DataSource需要是絕對路徑（也就是從磁碟機代號開始寫），以避免出問題。然後StaticWebPath我的設定值是「/mt-static」，這代表的是「<strong>D:/Apache/htdocs/mt-static/</strong>」，這個如果搞錯地方的話，那管理介面的樣式表、圖和說明文件的連結就都出不來了，事實上是不影響MT的運作啦。</p>

<p>上面的步驟都弄好了的話，就可以開啟你的mt.cgi，享受更低的主機負擔了-o-y～（寫成這樣不知有多少人看的懂~_~）</p></section>
            <footer>
              <a href="/log/web/" rel="tag">Web</a>
            </footer>
          </article>
          <hr/>
        </main>
        <aside role="complementary" class="pure-u-1 pure-u-lg-1-4">
          <hr/>
          <h2>其它資訊</h2>
          <form method="get" id="search-form" class="form-search" action="https://duckduckgo.com/" role="search">
            <input accesskey="4" id="search-input" type="search" name="q" size="20" tabindex="8" aria-label="搜尋" placeholder="搜尋" required="required" aria-required="true" class="search-query input-medium"/>
            <input type="hidden" name="sites" value="blog.othree.net"/>
          </form>
          <hr/>
          <div role="contentinfo"> <h3>關於本文章</h3><p><strong>mod_perl 跑 MT</strong>發表於 2003-12-19，文章類別為
			  <a href="/log/web/">Web</a>。
                  </p><div><button id="share-button" type="button">Share</button></div><p><a class="prev pn" href="/log/2003/12/18/catch-cold-day-4/"><span class="prefix">上一篇：</span>感冒第四天<time>2003-12-18</time></a><a class="next pn" href="/log/2003/12/20/whitespace-pre/"><span class="prefix">下一篇：</span>white-space: pre;<time>2003-12-20</time></a></p></div>
          <h3>關於本網誌</h3>
          <address itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">
            <p class="vcard">本網誌是 <a itemprop="name" href="https://twitter.com/othree" class="fn nickname" rel="me">othree</a> 的個人部落格，主要內容為網路標準、網頁設計，穿插些 ACG 心得和敗家紀錄，更詳細的資訊請見<a href="http://blog.othree.net/about/here/">關於這</a>，如要聯絡我請寄信到 <a itemprop="email" href="mailto:othree@gmail.com" class="email">othree@gmail.com</a></p>
          </address>
          <h3>近期文章</h3>
          <ul>
            <li>
              <a href="/log/2024/10/19/onautofill/" title="2024-10-19">onAutofill</a>
            </li>
            <li>
              <a href="/log/2024/07/21/oklab-color-space/" title="2024-07-21">Oklab Color Space</a>
            </li>
            <li>
              <a href="/log/2024/05/16/communication/" title="2024-05-16">溝通</a>
            </li>
            <li>
              <a href="/log/2024/05/08/see-different/" title="2024-05-08">看見不同的學習風景</a>
            </li>
            <li>
              <a href="/log/2024/04/24/happy-busy/" title="2024-04-24">時間ねぇ</a>
            </li>
            <li>
              <a href="/log/2024/04/17/json-type-definition/" title="2024-04-17">JSON Type Definition</a>
            </li>
            <li>
              <a href="/log/2024/04/03/the-magic-of-dialog/" title="2024-04-03">Dialog 的魔法</a>
            </li>
            <li>
              <a href="/log/2024/03/28/yamani/" title="2024-03-28">やまに（yamani）旅館</a>
            </li>
            <li>
              <a href="/log/2024/03/24/ui-event-order/" title="2024-03-24">UI Event Order</a>
            </li>
            <li>
              <a href="/log/2024/03/08/akira-toriyama/" title="2024-03-08">鳥山明過世</a>
            </li>
          </ul>
          <h3>分類彙整</h3>
          <ul>
            <li><a href="/log/about/">關於這裡</a> <span>(43)</span></li>
            <li><a href="/log/acg/">動畫、漫畫、遊戲</a> <span>(42)</span></li>
            <li><a href="/log/books/">與書相關</a> <span>(38)</span></li>
            <li><a href="/log/buy/">敗家</a> <span>(51)</span></li>
            <li><a href="/log/css-html/">CSS &amp; HTML</a> <span>(111)</span></li>
            <li><a href="/log/diary/">日記</a> <span>(139)</span></li>
            <li><a href="/log/mac/">蘋果蘋果</a> <span>(17)</span></li>
            <li><a href="/log/others/">其他</a> <span>(23)</span></li>
            <li><a href="/log/script/">SCRIPT</a> <span>(151)</span></li>
            <li><a href="/log/server/">Server Side</a> <span>(16)</span></li>
            <li><a href="/log/software/">軟體推薦、TIP</a> <span>(82)</span></li>
            <li><a href="/log/unix/">UNIX</a> <span>(20)</span></li>
            <li><a href="/log/vim/">VIM</a> <span>(46)</span></li>
            <li><a href="/log/web/">Web</a> <span>(202)</span></li>
          </ul>
          <h3>訂閱本網誌</h3>
          <ul id="feeds">
            <li>
              <a href="https://feeds.feedburner.com/othree">
                    FeedBurner
                  </a>
            </li>
          </ul>
          <h3>貼紙</h3>
          <p id="stickers">
            <a href="https://sites.google.com/view/happy-busy/">
              <img src="/images/busy_banner.png" width="200" height="40" alt="時間がない"/>
            </a>
            <a href="https://developer.mozilla.org/en/JavaScript" title="JavaScript Reference, JavaScript Guide, JavaScript API, JS API, JS Guide, JS Reference, Learn JS, JS Documentation">
              <img src="/images/240x480-1.2v2.png" height="240" width="120" alt="JavaScript Reference, JavaScript Guide, JavaScript API, JS API, JS Guide, JS Reference, Learn JS, JS Documentation"/>
            </a>
          </p>
        </aside>
      </div>
      <footer class="pure-g">
        <h2 class="pure-u-1">使用技術、規範、服務</h2>
        <p class="pure-u-1">
          <a href="http://creativecommons.org/licenses/by/4.0/deed.zh_TW">CC BY 4.0</a>
          <a itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization" href="https://othree.net">
            <span itemprop="name">othree.net</span>
            <span itemprop="logo" itemscope="itemscope" itemtype="http://schema.org/ImageObject">
              <link itemprop="url image" content="https://blog.othree.net/images/logo-amp-google.png"/>
              <meta itemprop="width" content="600"/>
              <meta itemprop="height" content="60"/>
            </span>
          </a>
        </p>
      </footer>
    </div>
    <script async="async" src="/scripts/all.js"/>
    <script async="async" src="/scripts/prism.js"/>
  </body>
</html>
